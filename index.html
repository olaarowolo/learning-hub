<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Learning Hub - by OA Tutors</title>

<!-- Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">

<!-- Font Awesome (single import) -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">

<!-- Bootstrap CSS -->
<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
<link href="/index.css" rel="stylesheet">

<!-- jQuery (single import) -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>


</head>
<body>
<a class="skip-link" href="#main-content">Skip to content</a>

<!-- NAVBAR -->
<nav class="navbar navbar-expand-custom navbar-mainbg">
  <a class="navbar-brand navbar-logo" href="/">Learning Hub</a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <i class="fas fa-bars text-white"></i>
  </button>

  <div class="collapse navbar-collapse" id="navbarSupportedContent">
    <ul class="navbar-nav ml-auto">
      <div class="hori-selector"><div class="left"></div><div class="right"></div></div>
      <li class="nav-item active"><a class="nav-link" href="#ks1">KS1</a></li>
      <li class="nav-item"><a class="nav-link" href="#ks2">KS2</a></li>
      <li class="nav-item"><a class="nav-link" href="#ks3">KS3</a></li>
      <li class="nav-item"><a class="nav-link" href="#ks4">KS4</a></li>
      <li class="nav-item"><a class="nav-link" href="#ks5">KS5</a></li>
      <li class="nav-item"><a class="nav-link" href="#purpose">Purpose-in-Motion™</a></li>
      <li class="nav-item"><a class="nav-link" href="#purpose">About</a></li>
      <li class="nav-item"><a class="nav-link" href="#purpose">Contact</a></li>
    </ul>
  </div>
</nav>

<header>
  <h1>Welcome, Future Stars! ✨</h1>
  <p>Ready for an adventure? Pick your year to start learning!</p>
</header>

<main id="main-content">
  <!-- KS1 -->
  <h2 id="ks1" class="ks-heading">Key Stage 1</h2>
  <div class="year-grid">
    <a href="yeargroups/EYFS/y0/yrR-index.html" class="year-card reception"><h2>Reception</h2></a>
    <a href="yeargroups/KS1/y1/yr1-index.html" class="year-card year-1"><h2>Year 1</h2></a>
    <a href="yeargroups/KS1/y2/yr2-index.html" class="year-card year-2"><h2>Year 2</h2></a>
  </div>

  <!-- KS2 -->
  <h2 id="ks2" class="ks-heading">Key Stage 2</h2>
  <div class="year-grid">
    <a href="yeargroups/KS2/y3/yr3-index.html" class="year-card year-3"><h2>Year 3</h2></a>
    <a href="yeargroups/KS2/y4/yr4-index.html" class="year-card year-4"><h2>Year 4</h2></a>
    <a href="yeargroups/KS2/y5/yr5-index.html" class="year-card year-5"><h2>Year 5</h2></a>
    <a href="yeargroups/KS2/y6/yr6-index.html" class="year-card year-6"><h2>Year 6</h2></a>
  </div>

  <!-- KS3 -->
  <h2 id="ks3" class="ks-heading">Key Stage 3</h2>
  <div class="year-grid">
    <a href="yeargroups/KS3/y7/yr7-index.html" class="year-card year-7"><h2>Year 7</h2></a>
    <a href="yeargroups/KS3/y8/yr8-index.html" class="year-card year-8"><h2>Year 8</h2></a>
    <a href="yeargroups/KS3/y9/yr9-index.html" class="year-card year-9"><h2>Year 9</h2></a>
  </div>

  <!-- KS4 -->
  <h2 id="ks4" class="ks-heading">Key Stage 4</h2>
  <div class="year-grid">
    <a href="yeargroups/KS4/y10/yr10-index.html" class="year-card year-10"><h2>Year 10</h2></a>
    <a href="yeargroups/KS4/y11/yr11-index.html" class="year-card year-11"><h2>Year 11</h2></a>
  </div>

  <!-- KS5 -->
  <h2 id="ks5" class="ks-heading">Key Stage 5</h2>
  <div class="year-grid">
    <a href="yeargroups/KS5/y12/yr12-index.html" class="year-card year-12"><h2>Year 12</h2></a>
    <a href="yeargroups/KS5/y13/yr13-index.html" class="year-card year-13"><h2>Year 13</h2></a>
  </div>

  <!-- Purpose-in-Motion -->
  <h2 id="purpose" class="ks-heading">Purpose-in-Motion™</h2>
  <div style="max-width:960px;margin:0 auto 3rem;padding:0 1rem;text-align:center;color:var(--text-light)">
    <p><strong>Purpose-in-Motion™</strong> — short blurb or link to the program page.</p>
    <p><a href="purpose/index.html" style="color:var(--primary);font-weight:700;text-decoration:underline">Learn more</a></p>
  </div>
</main>

<footer>
  <p>&copy; 2025 Learning Hub by <a href="https://oatutors.co.uk" target="_blank" rel="noopener noreferrer">OA Tutors</a>. Happy Learning!</p>
</footer>

<button id="scrollTopBtn" aria-label="Back to top" title="Back to top">↑</button>

<!-- Popper + Bootstrap JS (loaded after jQuery) -->
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

<script>
/* ---------- NAV JS ---------- */
/* Global function test() so any other script that expects test() will work */
function test(){
  var $tabs = $('#navbarSupportedContent');
  var $active = $tabs.find('li.active');

  if ($active.length === 0) {
    $active = $tabs.find('li').first().addClass('active');
  }

  var activeHeight = $active.innerHeight();
  var activeWidth = $active.innerWidth();
  var itemPos = $active.position(); // relative to parent (#navbarSupportedContent)

  var $selector = $(".hori-selector");
  // If selector not present, create minimal fallback (ensures no errors)
  if (!$selector.length) {
    $selector = $('<div class="hori-selector"><div class="left"></div><div class="right"></div></div>');
    $('#navbarSupportedContent > ul').prepend($selector);
  }

  $selector.css({
    "top": itemPos.top + "px",
    "left": itemPos.left + "px",
    "height": activeHeight + "px",
    "width": activeWidth + "px"
  });
}

/* Initialize nav behavior (clicks, resize, toggler) */
$(document).ready(function(){
  // Apply active from URL hash (e.g. #ks3) if present
  var hash = window.location.hash;
  if (hash) {
    var $link = $('#navbarSupportedContent ul li a[href="' + hash + '"]');
    if ($link.length) {
      $('#navbarSupportedContent ul li').removeClass('active');
      $link.parent().addClass('active');
    }
  } else {
    // fallback: ensure at least first item active
    if ($('#navbarSupportedContent ul li.active').length === 0) {
      $('#navbarSupportedContent ul li').first().addClass('active');
    }
  }

  // initial position
  setTimeout(function(){ test(); }, 10);

  // click handler (delegated)
  $('#navbarSupportedContent').on('click', 'li', function(e){
    $('#navbarSupportedContent ul li').removeClass('active');
    $(this).addClass('active');
    test();
  });

  // on collapse toggle (mobile)
  $('.navbar-toggler').on('click', function(){
    // let bootstrap finish toggling, then update selector
    setTimeout(function(){ test(); }, 300);
  });

  // resize -> reposition
  $(window).on('resize', function(){
    setTimeout(function(){ test(); }, 300);
  });
});

/* ---------- Scroll-based active highlighting ---------- */
document.addEventListener('DOMContentLoaded', function() {
  const scrollTopBtn = document.getElementById('scrollTopBtn');
  const sections = document.querySelectorAll('main h2[id]');

  if (sections.length > 0 && (window.location.pathname === '/' || window.location.pathname.endsWith('/index.html') || window.location.pathname === '')) {
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          const id = entry.target.getAttribute('id');
          const $navItems = $('#navbarSupportedContent ul li');
          $navItems.removeClass('active');
          const $activeLink = $('#navbarSupportedContent ul li a[href="#' + id + '"]');
          if ($activeLink.length) {
            $activeLink.parent().addClass('active');
            test();
          }
        }
      });
    }, { root: null, rootMargin: '0px 0px -48% 0px', threshold: 0 });

    sections.forEach(s => observer.observe(s));
  }

  // scroll top button
  window.addEventListener('scroll', () => {
    scrollTopBtn.style.display = (document.documentElement.scrollTop > 300) ? 'flex' : 'none';
  });
  scrollTopBtn.addEventListener('click', () => window.scrollTo({ top: 0, behavior: 'smooth' }));
});
</script>
</body>
</html>
