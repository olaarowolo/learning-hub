# .htaccess file to serve custom 404 page on Apache

# Enable rewrite engine
RewriteEngine On

# Ensure all dead links or unavailable links are redirected to data/yeargroups/404.html
# This rule checks if the requested path is not a file and not a directory.
# If it's not, it redirects the user to the custom 404 page.
# The [L] flag stops processing other rules if this one is matched.
# The [R=301] flag ensures a permanent redirect (good for SEO).
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^.*$ /data/yeargroups/404.html [L,R=301]

# Remove .html extension from URLs and hide .html in URL
# This rule is for a clean URL structure.
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s([^.]+)\.html [NC]
RewriteRule ^ %1 [R=301,L]

# This rule handles internal rewriting to find the correct .html file.
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.html -f
RewriteRule ^(.*)/?$ $1.html [L]

# The ErrorDocument directive is no longer necessary since the RewriteRule handles the redirection.
# You should update your 404.html page to include JavaScript for the popup.
